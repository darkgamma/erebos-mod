decisions = {
	decision_open_magic_window = {
	
		potential = {
			NOT = { has_character_flag = magic_window }
		}
		
		allow = { }
		
		effect = {
			set_character_flag = magic_window
		}
		revoke_allowed = { always = no }
		ai_will_do = { factor = 0 }
	}
	
	decision_close_magic_window = {
		is_high_prio = yes
		
		potential = {
			has_character_flag = magic_window
			NOT = { has_character_flag = spell_window }
		}
		
		allow = { }
		
		effect = {
			clr_character_flag = magic_window
		}
		
		revoke_allowed = { always = no }
		ai_will_do = { factor = 1 }
	}
	
	decision_employ_hemalurgists = {
		potential = {
			has_character_flag = magic_window
			NOT = { has_character_flag = spell_window }
		}
		allow = {
			wealth = 275
			NOT = { has_character_modifier = employment_timer }
		}
		effect = {
			wealth = -250
			hidden_tooltip = {
				add_character_modifier = {
					name = employment_timer
					duration = 3650
					hidden = yes
				}
				
				random_list = {
					45 = {
						random_list = {
							15 = {
								create_character = {
									random_traits = yes
									female = yes
									age = 18
								}
							}
							60 = {
								create_character = {
									random_traits = yes
									female = yes
									age = 28
								}
							}
							25 = {
								create_character = {
									random_traits = yes
									female = yes
									age = 45
								}
							}
						}
					}
					55 = {
						random_list = {
							15 = {
								create_character = {
									random_traits = yes
									female = no
									age = 18
								}
							}
							60 = {
								create_character = {
									random_traits = yes
									female = no
									age = 28
								}
							}
							25 = {
								create_character = {
									random_traits = yes
									female = no
									age = 45
								}
							}
						}
					}
				}
				
				new_character = {
				
					wealth = 200
					
					remove_trait = martial_cleric
					remove_trait = scholarly_theologian
					remove_trait = mastermind_theologian
					remove_trait = detached_priest
					remove_trait = amateurish_plotter
					remove_trait = flamboyant_schemer
					remove_trait = intricate_webweaver
					remove_trait = elusive_shadow
					remove_trait = naive_appeaser
					remove_trait = underhanded_rogue
					remove_trait = charismatic_negotiator
					remove_trait = grey_eminence
					remove_trait = indulgent_wastrel
					remove_trait = thrifty_clerk
					remove_trait = fortune_builder
					remove_trait = midas_touched
					remove_trait = misguided_warrior
					remove_trait = tough_soldier
					remove_trait = skilled_tactician
					remove_trait = brilliant_strategist
					remove_trait = imbecile
					remove_trait = inbred
					remove_trait = slow
					remove_trait = infirm
					remove_trait = incapable
					remove_trait = leper
					remove_trait = possessed
					remove_trait = ill
					remove_trait = pneumonic
					remove_trait = maimed
					
					random_list = {
						20 = { 
							if = {
								limit = { female = no }
								add_trait = martial_cleric
							}
							if = {
								limit = { female = yes }
								add_trait = intricate_webweaver
							}
						}
						20 = { add_trait = intricate_webweaver }
						20 = { add_trait = thrifty_clerk }
						20 = { add_trait = charismatic_negoitator }
						10 = { add_trait = fortune_builder }
						10 = { add_trait = skilled_tactician }
						5 = { add_trait = midas_touched }
						5 = { add_trait = grey_eminence }
						5 = { add_trait = intricate_webweaver }
						5 = { add_trait = brilliant_strategist }
					}
					
					random_list = {
						150 = { add_trait = hsb_bronze }
						445 = { add_trait = hsb_yellow }
						205 = { add_trait = hsb_jade }
						145 = { add_trait = hsb_teal }
						35 = { add_trait = hsb_blue }
						15 = { add_trait = hsb_indigo }
						5 = { add_trait = hsb_violet }
					}
					
					random_list = {
						50 = { add_trait = hema_1 }
						30 = { add_trait = hema_2 }
						15 = { add_trait = hema_3 }
						5 = { add_trait = hema_4 }
					}
					
					random_list = {
						8 = { add_trait = fair }
						8 = { add_trait = quick }
						2 = {
							add_trait = fair
							add_trait = quick
						}
						82 = { }
					}

					change_stewardship = 2
					change_diplomacy = 3
					change_intrigue = 3
					give_minor_title = title_hemalurgist_main
				}
				
				random_list = {
					45 = {
						random_list = {
							15 = {
								create_character = {
									random_traits = yes
									female = yes
									age = 18
								}
							}
							60 = {
								create_character = {
									random_traits = yes
									female = yes
									age = 28
								}
							}
							25 = {
								create_character = {
									random_traits = yes
									female = yes
									age = 45
								}
							}
						}
					}
					55 = {
						random_list = {
							15 = {
								create_character = {
									random_traits = yes
									female = no
									age = 18
								}
							}
							60 = {
								create_character = {
									random_traits = yes
									female = no
									age = 28
								}
							}
							25 = {
								create_character = {
									random_traits = yes
									female = no
									age = 45
								}
							}
						}
					}
				}
				
				new_character = {
				
					wealth = 50
					
					remove_trait = martial_cleric
					remove_trait = scholarly_theologian
					remove_trait = mastermind_theologian
					remove_trait = detached_priest
					remove_trait = amateurish_plotter
					remove_trait = flamboyant_schemer
					remove_trait = intricate_webweaver
					remove_trait = elusive_shadow
					remove_trait = naive_appeaser
					remove_trait = underhanded_rogue
					remove_trait = charismatic_negotiator
					remove_trait = grey_eminence
					remove_trait = indulgent_wastrel
					remove_trait = thrifty_clerk
					remove_trait = fortune_builder
					remove_trait = midas_touched
					remove_trait = misguided_warrior
					remove_trait = tough_soldier
					remove_trait = skilled_tactician
					remove_trait = brilliant_strategist
					remove_trait = imbecile
					remove_trait = inbred
					remove_trait = slow
					remove_trait = infirm
					remove_trait = incapable
					remove_trait = leper
					remove_trait = possessed
					remove_trait = ill
					remove_trait = pneumonic
					remove_trait = maimed
					
					random_list = {
						20 = { add_trait = intricate_webweaver }
						20 = { add_trait = thrifty_clerk }
						20 = { add_trait = charismatic_negoitator }
						10 = { add_trait = fortune_builder }
						10 = { add_trait = skilled_tactician }
					}
					
					random_list = {
						445 = { add_trait = hsb_red }
						205 = { add_trait = hsb_bronze }
						150 = { add_trait = hsb_yellow }
						135 = { add_trait = hsb_lime }
						45 = { add_trait = hsb_jade }
						15 = { add_trait = hsb_teal }
						5 = { add_trait = hsb_blue }
					}
					
					random_list = {
						105 = { add_trait = fair }
						70 = { add_trait = quick }
						5 = {
							add_trait = fair
							add_trait = quick
						}
						820 = { }
					}

					change_stewardship = 1
					change_diplomacy = 2
					change_intrigue = 2
					give_minor_title = title_hemalurgist_help
				}
			}
		}
		revoke_allowed = { always = no }
		ai_will_do = { factor = 0 }
	}

	decision_open_spells = {
		potential = {
			has_character_flag = magic_window
			NOT = { has_character_flag = spell_window }
		}
		
		allow = { }
		
		effect = {
			set_character_flag = spell_window
		}
		revoke_allowed = { always = no }
		ai_will_do = { factor = 0 }
	}
	
	decision_close_spells = {
		is_high_prio = yes
		potential = { has_character_flag = spell_window 
			has_character_flag = magic_window }
		allow = { }
		effect = { clr_character_flag = spell_window }
		revoke_allowed = { always = no }
		ai_will_do = { factor = 0 }
	}
}